(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function o(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=o(r);fetch(r.href,s)}})();const v=e=>/^https?:\/\//i.test(e.trim()),d=e=>e.split(",").map(t=>t.trim()).filter(t=>t.length>0),F=/^[A-Za-z ]+$/;function H(e){const t=e.trim();if(t===""||t==='"*"'||t==="*")return{keywords:[]};if(!F.test(t)){const n=[...t].findIndex(s=>!/[A-Za-z ]/.test(s)),r=n>=0?t[n]:"?";return{keywords:[],error:`9열 search keyword에 알파벳/공백 외 문자 발견: '${r}'`}}return{keywords:d(t.toLowerCase())}}function J(e){return!e||e.trim()===""||e.trim()==="*"||e.trim()==='"*"'?[""]:d(e).map(t=>t.replace(/[^0-9]/g,"")).filter(t=>t.length>0)}function z(e){const t=e.trim();return!t||t===""?[""]:t==="*"||t==='"*"'?["*"]:d(t).map(n=>{const r=n.replace(/[^0-9]/g,"");return r.length>0?r:n})}function D(e){return!e||e.trim()===""||e.trim()==="*"||e.trim()==='"*"'?[]:d(e)}function L(e){const t=e.trim();if(!t||t==="")return 0;const o=parseFloat(t);return isNaN(o)?0:o}function K(e){const t=e.replace(/\r\n?/g,`
`).split(`
`).filter(s=>s.trim().length>0),o=[],n=[],r=[];return t.forEach((s,l)=>{const a=l+1,u=s.split("	").map(P=>P.trim());for(u.length<14&&n.push(`행 ${a}: 컬럼 수(${u.length})가 14보다 적음`);u.length<14;)u.push("");const[S,_,B,w,x,C,N,f,O,R,U,g,I,T]=u;w||n.push(`행 ${a}: title 비어있음`),f&&!v(f)&&n.push(`행 ${a}: description_src URL 형식 아님`),g&&!v(g)&&n.push(`행 ${a}: gmap_url URL 형식 아님`);const j=L(I),A=L(T),m=H(O);if(m.error){r.push(`행 ${a}: ${m.error}`);return}const M={id:S,tags:D(_),regionTags:B,title:w,region:x,nation:C,description:N,description_src:f,search_keywords:m.keywords,preferred_id:J(R),ignore_id:z(U),gmap_url:g,latitude:j,longitude:A,custom_imgs:[]};o.push(M)}),{ok:o,warnings:n,errors:r}}const i=e=>document.getElementById(e),k=i("input"),p=i("output"),W=i("status"),Z=i("errorsWrap"),$=i("errors"),q=i("errCount"),V=i("convertBtn"),E=i("copyBtn"),b=i("downloadBtn"),Y=i("clearBtn");function c(e){W.textContent=e}function h(e){E.disabled=!e,b.disabled=!e}function y(e,t){$.innerHTML="";const o=[...e.map(n=>({text:n,cls:"err"})),...t.map(n=>({text:n,cls:"warn"}))];for(const n of o){const r=document.createElement("li");r.textContent=n.text,$.appendChild(r)}q.textContent=String(o.length),Z.open=o.length>0}V.addEventListener("click",()=>{const e=k.value,{ok:t,warnings:o,errors:n}=K(e),r=JSON.stringify(t,null,2);p.value=r,h(t.length>0),c(`성공 ${t.length}개 · 오류 ${n.length}개 · 경고 ${o.length}개`),y(n,o)});E.addEventListener("click",async()=>{try{await navigator.clipboard.writeText(p.value),c("JSON이 클립보드에 복사되었습니다.")}catch{c("클립보드 복사 실패. 브라우저 권한을 확인하세요.")}});b.addEventListener("click",()=>{const e=new Blob([p.value],{type:"application/json;charset=utf-8"}),t=URL.createObjectURL(e),o=document.createElement("a"),n=new Date,r=`converted-${n.getFullYear()}${String(n.getMonth()+1).padStart(2,"0")}${String(n.getDate()).padStart(2,"0")}-${String(n.getHours()).padStart(2,"0")}${String(n.getMinutes()).padStart(2,"0")}.json`;o.href=t,o.download=r,o.click(),URL.revokeObjectURL(t),c("JSON 파일을 다운로드했습니다.")});Y.addEventListener("click",()=>{k.value="",p.value="",h(!1),y([],[]),c("초기화됨")});h(!1);y([],[]);c("TSV를 붙여넣고 Convert를 누르세요. 9번째 컬럼은 알파벳/공백/쉼표만 허용");
